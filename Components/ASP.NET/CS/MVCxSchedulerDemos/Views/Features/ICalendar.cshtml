@model IEnumerable
           
<script type="text/javascript">
    function OnTextChanged(s, e) {
        schedulerExport.ShowLoadingPanel();
        var $form = $("#changeStorage");
        $form.attr("action", $form.attr("action") + "?Import=true")
        $form.submit();
    }
</script>
@using(Html.BeginForm("ChangeStorage", "Features", FormMethod.Post, new {id = "changeStorage"})) {
    @Html.DevExpress().FormLayout(settings => {
        settings.Name = "flOptions";
        settings.UseDefaultPaddings = false;
        settings.Style["padding"] = "10px 0px";
        settings.Items.AddGroupItem(g => {
            g.UseDefaultPaddings = false;
            g.ColCount = 2;
            g.GroupBoxDecoration = GroupBoxDecoration.None;
            g.Items.Add(i => {
                i.ShowCaption = DefaultBoolean.False;
                i.NestedExtension().UploadControl(u => {
                    u.Name = "schedulerAptImporter";
                    u.CallbackRouteValues = new { Controller = "Features", Action = "ICalendarImport" };
                    u.ValidationSettings.MaxFileSize = 1048576;
                    u.ShowTextBox = false;
                    u.BrowseButton.Text = "Import appointments...";
                    u.Styles.TextBox.Height = Unit.Pixel(27);
                    u.ClientSideEvents.TextChanged = "OnTextChanged";
                });
            });
            g.Items.Add(i => {
                i.ShowCaption = DefaultBoolean.False;
                i.NestedExtension().Button(s => {
                    s.Name = "Export";
                    s.Text = "Export appointments";
                    s.UseSubmitBehavior = true;
                });
            });
        });
    }).GetHtml()
    @Html.Partial("ICalendarPartial", Model)
}