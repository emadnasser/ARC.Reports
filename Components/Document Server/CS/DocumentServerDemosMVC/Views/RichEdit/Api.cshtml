@model RichEditApiModel
<script type="text/javascript">
    $(document).ready(function () {
        var mainTableHeight = document.getElementById("mainTable").offsetHeight;
        document.getElementById("treeListContainer").style.height = mainTableHeight - 6 + "px";
    });
    function OnExampleTreeListFocusedNodeChanged(s, e) {
        var key = exampleTreeList.GetFocusedNodeKey();
        var queryData = {};
        queryData.SourceId = key;
        $.ajax({
            url: '@Url.Action("ApiChangeCurrentSourceCode", "RichEdit")',
            data: queryData,
            traditional: true,
            success: OnApiChangeCurrentSourceCode
        });
    }
    OnApiChangeCurrentSourceCode = function (responseData) {
        $("#CSharpCodeHolder").html(responseData.CSCode);
        LblSourceName.textContent = responseData.SourceName;
        $('#SourceId').val(responseData.SourceId);
        var args = "SourceId=" + responseData.SourceId;
        RichEditPreview.Update(args);
    }
</script>

@using (Html.BeginForm("ApiExportTo", "RichEdit", FormMethod.Post)) {
    @Html.Hidden("SourceId", 0)
    <table>
        <tr>
            <td style="width: 100%;">
                @Html.DevExpress().Label(
                    settings => {
                        settings.Name = "LblSourceName";
                        settings.Text = Model.SourceName;
                        settings.Style.Add(HtmlTextWriterStyle.FontSize, "X-Large");

                    }).GetHtml()
            </td>
            <td>
                @Html.Partial("RichEditDocumentDownloaderPartial")
            </td>
        </tr>
    </table>
    <div style="border: 1px Solid rgb(224, 224, 224);">
    </div>
    <table id="mainTable" style="width: 100%;">
        <tr>
            <td style="vertical-align: top; vertical-align: top; width: 100%">
                <div style="overflow: auto; height: 250px;">
                                        <div id="CSharpCodeHolder">@Html.Raw(@Model.CSCode)</div></div> 
            </td>
            <td rowspan="2">
                <div id="treeListContainer" style="height: 550px; overflow: scroll; width: 280px; padding: 0; margin: 0;">
                    @Html.Partial("ApiExampleTreeListPartial", Model.SourceCodeTreeModel);
                </div>
            </td>
        </tr>
        <tr>
            <td id="previewFrameContainer" style="vertical-align: top; width: 100%; height: 300px; padding-right: 2px;">
                @Html.Partial("RichEditPreviewPartial", Model.PreviewModel)
            </td>
        </tr>
    </table>
}